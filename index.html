<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Ventilator Prediction </title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    var on_vent; 
    var arrivals;
    var outputText;
        function validate() {
            // get the input
            on_vent = document.forms["input_form"]["aterm"].value;
            arrivals = document.forms["input_form"]["bterm"].value;
            // validate a, b and c
            if (on_vent < 0) {
                outputText = "<em>number of patients</em> cannot be less then zero!";
            } else if (arrivals < 0) {
                outputText = "<em>number of patients</em> cannot be less then zero!";
            } else if (isNaN(on_vent)) {
                outputText = "<em>number of patients</em> must be a number!";
            } else if (isNaN(arrivals)) {
                outputText = "<em>number of patients</em> must be a number!";
            } else {
                // calculate the result using x = (-b +- sqrt(b^2 - 4ac)) / 2a
                var los1 = 10;
                var los2 = 5;
                var los3 = 5;
                var p1 = 0.7;
                var p2 = 0.06;
                var p3 = 0.24;
                var los_av = p1*los1+p2*los2+p3*los3;
                var ans = Math.trunc((p2+p3)/los_av*on_vent + (p2/los2+p3/los3)*arrivals);
                outputText = "Expected number of new ventilators: <strong>" + ans;
            }
            // output the result (or errors)
            document.getElementById("output_text").innerHTML = outputText;
        }
   </script>	
</head>
	
<body style="background-color:white;"> 
   <img src="Cornell ORIE logo.jpg"; style="width:700px"; alt="Cornell ORIE Logo">
   <div class="container">
 	<ul class="nav nav-tabs">
    	<li class="active"><a data-toggle="tab"; href="#home">Home</a></li>
    	<li><a data-toggle="tab"; href="#modeloverview">Model Overview</a></li>
   	<li><a data-toggle="tab"; href="#contact">Contact</a></li>
  	</ul>  
		
   <div class="tab-content">
    	<div id="home"; class="tab-pane fade in active"> 
	   <h2 style="text-align:center;font-family:Arial;"> How many ventilators will be needed tomorrow? </h2>	  
    	   <form name="input_form" action="javascript:validate();">
           Number of patients in the hospital not on ventilators: <input type="text" name="aterm" size="5" required>
	   <br><br>
           Anticipated number of admissions tomorrow: <input type="text" name="bterm" size="5" required>
   	   <br><br>
           <input type="submit" value="Calculate">
   	   </form>
   	   <p id="output_text"/>
		
	<embed src="https://new-admission-prediction.shinyapps.io/new_admission/" style="width:800px; height: 500px;">	
	
		
	</div>
	   
	<div id="modeloverview"; class="tab-pane fade"> 
		
	   <h2 style="text-align:left;font-family:Arial;"> Ventilators Shortage</h2>
	   <pre>Mechanical ventilation is a vital component of the medical support for patients with severe acute respiratory failure caused by COVID-19. 
Many U.S. and other countries hospitals are already experiencing shortages. The number of hospitalized patients differ from one place to another, 
motivating dynamically allocate ventilators from a central stockpile.
</pre>
	   
	   <h2 style="text-align:left;font-family:Arial;"> Technical details </h2>
	   <pre>We provide an algorithm that predicts the number of Covid-19 patients who will start to require ventilators.  
This algorithm is intended to be utilized by a large hospital or a group of coordinated hospitals (see documentation (link to be added ) for details).</pre>
	   
	  
	</div>
	   
    	<div id="contact"; class="tab-pane fade"> </div>
	   
   </div>
   </div>
  </body>
</html>

<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Ventilator Prediction </title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    var on_vent; 
    var arrivals;
    var outputText;
        function validate() {
            // get the input
            on_vent = document.forms["input_form"]["aterm"].value;
            arrivals = document.forms["input_form"]["bterm"].value;
            // validate a, b and c
            if (on_vent < 0) {
                outputText = "<em>number of patients</em> cannot be less then zero!";
            } else if (arrivals < 0) {
                outputText = "<em>number of patients</em> cannot be less then zero!";
            } else if (isNaN(on_vent)) {
                outputText = "<em>number of patients</em> must be a number!";
            } else if (isNaN(arrivals)) {
                outputText = "<em>number of patients</em> must be a number!";
            } else {
                // calculate the result using x = (-b +- sqrt(b^2 - 4ac)) / 2a
                var los1 = 10;
                var los2 = 5;
                var los3 = 5;
                var p1 = 0.7;
                var p2 = 0.06;
                var p3 = 0.24;
                var los_av = p1*los1+p2*los2+p3*los3;
                var ans = Math.trunc((p2+p3)/los_av*on_vent + (p2/los2+p3/los3)*arrivals);
                outputText = "Expected number of new ventilators: <strong>" + ans;
            }
            // output the result (or errors)
            document.getElementById("output_text").innerHTML = outputText;
        }
   </script>	
</head>
	
<body style="background-color:white;"> 
   <img src="Cornell ORIE logo.jpg"; style="width:700px"; alt="Cornell ORIE Logo">
   <div class="container">
 	<ul class="nav nav-tabs">
    	<li class="active"><a data-toggle="tab"; href="#home">Home</a></li>
    	<li><a data-toggle="tab"; href="#modeloverview">Model Overview</a></li>
   	<li><a data-toggle="tab"; href="#contact">Contact</a></li>
  	</ul>  
		
   <div class="tab-content">
    	<div id="home"; class="tab-pane fade in active"> 
	   <br></br>
	   <h2 style="text-align:left;font-family:Arial;"> How many ventilators will be needed tomorrow? </h2>	 
	   <br></br>
    	   <form name="input_form" action="javascript:validate();">
           Number of patients in the hospital not on ventilators: <input type="text" name="aterm" size="5" required>
	   <br><br>
           Anticipated number of admissions tomorrow: <input type="text" name="bterm" size="5" required>
   	   <br><br>
           <input type="submit" value="Calculate">
   	   </form>
   	   <p id="output_text"/>
		
		<h3 style="text-align:left;font-family:Arial;"> Predict number of admissions tomorrow</h3>
		<pre word-break: break-all; white-space: normal;>
		
If you need help with estimation of the number of admissions on the next day, you can use our tool based on the history of admissions.
Please, input data in the following format: A<sub>d-m</sub>, A<sub>d-(m-1)</sub>..., A<sub>d</sub>,	where A<sub>d-k</sub> is the number of patinets admitted k days ago. 
		</pre>
	<embed src="https://new-admission-prediction.shinyapps.io/new_admission/" style="width:800px; height: 500px;">	
		
	</div>
	   
	<div id="modeloverview"; class="tab-pane fade"> 
	   <h3 style="text-align:left;font-family:Arial;"> The Ventilator Shortage</h3>
  <!-- Do not add text beyond this width of this border below, otherwise will trigger scroll bar                          -->
	   <pre word-break: break-all; white-space: normal;>
  
  Mechanical ventilation is a major component of vital medical support for COVID-19 patients with severe acute respiratory 
  failure. Many hospitals in the U.S. and other countries have been already experiencing ventilator shortages. Our model 
  provides these hospitals with meaningful predictions to assist them in the dynamic allocation of ventilators from a central 
  stockpile.
	   </pre>
	   
	   <h3 style="text-align:left;font-family:Arial;"> Our Model </h3>
  <!-- Do not add text beyond this width of this border below, otherwise will trigger scroll bar                          -->
	   <pre word-break: break-all; white-space: normal;>
  
  We developed an algorithm that predicts the number of Covid-19 patients who will start to require ventilators. This 
  algorithm is intended to be utilized by a large hospital or a group of coordinated hospitals (see documentation (link to be 
  added) for details).
	   </pre>
	   
	   <ol>
 	      <li>Based on medical reports and articles with information about course of the COVID-19 we create a simulation model 
		  that is calibrated with New York City's Covid-19 data:  
  		  <img src="vents_nyc_sim_errorbars.png"; style="width:800px"; alt="simulation results v nyc data">
 	     </li>
		   
  	     <li> We predict the number of new patients who require ventilatory support the next day based on two numbers: (1) number 
		  of hospitalized patients not currently ventilated and (2) anticipated number of new hospital admissions on the next day.

 		  <img src="VentStarts.png"; style="width:600px"; alt="simulation results v nyc data">
 	     </li>
		   
 	     <li>We propose a ventilator ordering and returning policy. In the simulation study under our ventilator order 
		 and return policy, no patients were denied of ventilation and there was no excessive
		 inventory of ventilators kept at hospitals.
		     
		 <img src="FreeVent.png"; style="width:600px"; alt="simulation results v nyc data">
	     </li>
	</ol> 
   </div>
	   
    	<div id="contact"; class="tab-pane fade"> </div>
	   
   	</div>
   </div>
  </body>
</html>
